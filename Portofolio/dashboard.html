<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Admin</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="icon" href="image/logo.png" type="image/x-icon" />
    <link rel="stylesheet" href="dashboard/css/dashboard.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
  </head>
  <body>
    <!-- Tombol toggle sidebar di luar sidemenu, hanya tampil di layar kecil -->
    <button
      id="sidebarToggleBtn"
      class="sidebar-toggle-btn"
      title="Tampilkan/ Sembunyikan Menu"
    >
      <i class="bi bi-list"></i>
    </button>
    <div class="dashboard-hr-container">
      <aside class="dashboard-sidebar" id="dashboardSidebar">
        <div class="sidebar-logo mb-4">Pyy</div>
        <ul class="sidebar-menu">
          <li class="active">
            <a
              href="dashboard.html"
              style="
                color: inherit;
                text-decoration: none;
                display: flex;
                align-items: center;
              "
            >
              <span class="sidebar-icon"><i class="bi bi-grid"></i></span>
              <span class="sidebar-label">Dashboard</span>
            </a>
          </li>
          <li>
            <a
              href="project.html"
              style="
                color: inherit;
                text-decoration: none;
                display: flex;
                align-items: center;
              "
            >
              <span class="sidebar-icon"><i class="bi bi-people"></i></span>
              <span class="sidebar-label">Project</span>
            </a>
          </li>
          <li>
            <a
              href="certificate.html"
              style="
                color: inherit;
                text-decoration: none;
                display: flex;
                align-items: center;
              "
            >
              <span class="sidebar-icon"><i class="bi bi-award"></i></span>
              <span class="sidebar-label">Sertificate</span>
            </a>
          </li>
          <li>
            <a
              href="galeri.html"
              style="
                color: inherit;
                text-decoration: none;
                display: flex;
                align-items: center;
              "
            >
              <span class="sidebar-icon"><i class="bi bi-images"></i></span>
              <span class="sidebar-label">Galeri</span>
            </a>
          </li>
          <li>
            <a
              href="calendar.html"
              style="
                color: inherit;
                text-decoration: none;
                display: flex;
                align-items: center;
              "
            >
              <span class="sidebar-icon"><i class="bi bi-calendar"></i></span>
              <span class="sidebar-label">Calendar</span>
            </a>
          </li>
          <li>
            <a
              href="settings.html"
              style="
                color: inherit;
                text-decoration: none;
                display: flex;
                align-items: center;
              "
            >
              <span class="sidebar-icon"><i class="bi bi-gear"></i></span>
              <span class="sidebar-label">Settings</span>
            </a>
          </li>
        </ul>
        <!-- <div class="sidebar-premium mt-auto">
          <img
            src="image/bintanglima.png"
            alt="Premium"
            class="sidebar-premium-img"
          />
          <div class="sidebar-premium-text">Use our Premium Features Now!</div>
        </div>
        <div class="sidebar-admin mt-4" id="sidebarAdminName"></div> -->
        <a class="btn btn-sm btn-danger mt-2 w-100" href="#" id="logoutBtn"
          >Logout</a
        >
      </aside>
      <!-- Tombol toggle sidebar dipindah ke dalam dashboard-header -->
      <main class="dashboard-main">
        <div
          class="dashboard-header"
          style="
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            padding: 18px 32px;
            margin-bottom: 24px;
          "
        >
          <div
            class="dashboard-title mb-0"
            style="font-size: 2rem; font-weight: 700; color: #2d3748"
          >
            Dashboard
          </div>
          <div class="dashboard-header-actions">
            <i class="bi bi-bell"></i>
            <i class="bi bi-envelope"></i>
            <span class="dashboard-user">
              <img src="image/me.jpeg" alt="Admin" class="dashboard-user-img" />
              <span id="dashboardUserName"></span>
            </span>
          </div>
        </div>

        <div class="dashboard-content-hr row gx-4 gy-4">
          <div class="col-lg-8">
            <div class="dashboard-welcome card mb-4">
              <div class="card-body d-flex align-items-center">
                <div class="flex-grow-1">
                  <h5>
                    Selamat <span id="greetingTime"></span>
                    <span id="welcomeName">Admin</span>!
                  </h5>
                  <script>
                    function getGreeting() {
                      const hour = new Date().getHours();
                      if (hour >= 5 && hour < 12) return "pagi";
                      if (hour >= 12 && hour < 15) return "siang";
                      if (hour >= 15 && hour < 18) return "sore";
                      return "malam";
                    }
                    document.getElementById("greetingTime").textContent =
                      getGreeting();
                  </script>
                </div>
              </div>
            </div>

            <div class="dashboard-section card">
              <div class="card-body">
                <div
                  class="d-flex justify-content-between align-items-center mb-3"
                >
                  <h6 class="mb-0">Summary</h6>
                </div>
                <div class="row text-center">
                  <div class="col-md-4 mb-3">
                    <div class="card shadow-sm">
                      <div class="card-body">
                        <i
                          class="bi bi-images"
                          style="font-size: 2rem; color: #6c63ff"
                        ></i>
                        <h5 class="mt-2 mb-1">Gallery</h5>
                        <div class="fs-3 fw-bold" id="totalGallery">12</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <div class="card shadow-sm">
                      <div class="card-body">
                        <i
                          class="bi bi-people"
                          style="font-size: 2rem; color: #ff6584"
                        ></i>
                        <h5 class="mt-2 mb-1">Projects</h5>
                        <div class="fs-3 fw-bold" id="totalProjects">8</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <div class="card shadow-sm">
                      <div class="card-body">
                        <i
                          class="bi bi-award"
                          style="font-size: 2rem; color: #43e97b"
                        ></i>
                        <h5 class="mt-2 mb-1">Certificates</h5>
                        <div class="fs-3 fw-bold" id="totalCertificates">5</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="dashboard-section card mt-2">
            <div class="card"></div>
              <div class="card-body py-2 px-1">
                <h6 class="mb-2 text-center" style="font-size:1rem;">Grafik Summary</h6>
                <canvas id="summaryChart" height="120" style="max-height:120px;"></canvas>
              </div>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script>
              const ctx = document.getElementById('summaryChart').getContext('2d');
              const summaryChart = new Chart(ctx, {
                type: 'line',
                data: {
                  labels: ['Certificates', 'Projects', 'Gallery'],
                  datasets: [{
                    label: 'Total',
                    data: [
                      parseInt(document.getElementById('totalCertificates').textContent),
                      parseInt(document.getElementById('totalProjects').textContent),
                      parseInt(document.getElementById('totalGallery').textContent)
                    ],
                    backgroundColor: 'rgba(67,233,123,0.2)',
                    borderColor: '#43e97b',
                    pointBackgroundColor: [
                      '#43e97b',
                      '#ff6584',
                      '#6c63ff'
                    ],
                    pointBorderColor: '#fff',
                    borderWidth: 2,
                    tension: 0.3
                  }]
                },
                options: {
                  responsive: true,
                  plugins: {
                    legend: { display: false }
                  },
                  scales: {
                    y: { beginAtZero: true }
                  }
                }
              });
            </script>
          </div>

          <div class="col-lg-4">
            <div class="dashboard-calendar card mb-4">
              <div class="card-body">
                <div
                  class="d-flex justify-content-between align-items-center mb-2"
                >
                  <span id="calendarMonthYear"></span>
                  <div>
                    <button class="btn btn-light btn-sm" id="calendarPrevBtn">
                      <i class="bi bi-chevron-left"></i>
                    </button>
                    <button class="btn btn-light btn-sm" id="calendarNextBtn">
                      <i class="bi bi-chevron-right"></i>
                    </button>
                  </div>
                </div>
                <table
                  class="table table-bordered dashboard-calendar-table mb-0"
                >
                  <thead>
                    <tr>
                      <th>SU</th>
                      <th>MO</th>
                      <th>TU</th>
                      <th>WE</th>
                      <th>TH</th>
                      <th>FR</th>
                      <th>SA</th>
                    </tr>
                  </thead>
                  <tbody id="calendarBody">
                    <!-- Calendar days will be injected here -->
                  </tbody>
                </table>
              </div>
            </div>
            <script>
              function renderCalendar(month, year) {
                const calendarBody = document.getElementById("calendarBody");
                const monthYear = document.getElementById("calendarMonthYear");
                const today = new Date();
                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const monthNames = [
                  "January",
                  "February",
                  "March",
                  "April",
                  "May",
                  "June",
                  "July",
                  "August",
                  "September",
                  "October",
                  "November",
                  "December",
                ];
                monthYear.textContent = `${monthNames[month]}, ${year}`;
                let html = "";
                let date = 1;
                for (let i = 0; i < 6; i++) {
                  html += "<tr>";
                  for (let j = 0; j < 7; j++) {
                    if (i === 0 && j < firstDay) {
                      html += "<td></td>";
                    } else if (date > daysInMonth) {
                      html += "<td></td>";
                    } else {
                      const isToday =
                        date === today.getDate() &&
                        month === today.getMonth() &&
                        year === today.getFullYear();
                      html += `<td${
                        isToday ? ' class="calendar-today"' : ""
                      }>${date}</td>`;
                      date++;
                    }
                  }
                  html += "</tr>";
                  if (date > daysInMonth) break;
                }
                calendarBody.innerHTML = html;
              }
              let currentMonth = new Date().getMonth();
              let currentYear = new Date().getFullYear();
              renderCalendar(currentMonth, currentYear);
              document.getElementById("calendarPrevBtn").onclick = function () {
                currentMonth--;
                if (currentMonth < 0) {
                  currentMonth = 11;
                  currentYear--;
                }
                renderCalendar(currentMonth, currentYear);
              };
              document.getElementById("calendarNextBtn").onclick = function () {
                currentMonth++;
                if (currentMonth > 11) {
                  currentMonth = 0;
                  currentYear++;
                }
                renderCalendar(currentMonth, currentYear);
              };
            </script>
            <div class="dashboard-profile card">
              <div class="card-body text-center">
                <img
                  src="image/me.jpeg"
                  class="dashboard-profile-img mb-2"
                  alt="Profile"
                />
                <div class="fw-bold" id="profileName">Mr Smith</div>
                <div class="text-muted mb-2" style="font-size: 0.9rem">
                  Sr. HR Manager
                </div>
                <div class="d-flex justify-content-center gap-2 mb-2">
                  <a href="#" class="btn btn-light btn-sm"
                    ><i class="bi bi-telephone"></i
                  ></a>
                  <a href="#" class="btn btn-light btn-sm"
                    ><i class="bi bi-envelope"></i
                  ></a>
                  <a href="#" class="btn btn-light btn-sm"
                    ><i class="bi bi-chat"></i
                  ></a>
                </div>
                <div class="text-start mt-3" style="font-size: 0.9rem">
                  <div><b>Company</b>: FastHR Pvt. Ltd.</div>
                  <div><b>Joining Date</b>: 01/03/2018</div>
                  <div><b>Projects</b>: 34 Active</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
    <script src="dashboard/js/dashboard.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
  </body>
</html>
